<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NavigationServiceFluent.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Ring of Automation UI Test Framework</a> &gt; <a href="index.source.html" class="el_package">io.cyborgcode.roa.ui.service.fluent</a> &gt; <span class="el_source">NavigationServiceFluent.java</span></div><h1>NavigationServiceFluent.java</h1><pre class="source lang-java linenums">package io.cyborgcode.roa.ui.service.fluent;

import io.cyborgcode.roa.ui.selenium.smart.SmartWebDriver;
import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;
import io.qameta.allure.Allure;
import java.util.Objects;
import org.assertj.core.api.Assertions;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.NoSuchWindowException;

/**
 * A fluent service class for handling navigation-related actions in a web automation framework.
 *
 * &lt;p&gt;Provides methods to navigate between pages, handle browser tabs/windows, interact with frames, and manage alerts.
 *
 * &lt;p&gt;The generic type {@code T} represents the UI service fluent implementation that extends {@link UiServiceFluent},
 * allowing method chaining for seamless interaction.
 *
 * @author Cyborg Code Syndicate üíçüë®üíª
 */
@SuppressWarnings({&quot;java:S5960&quot;, &quot;unchecked&quot;})
public class NavigationServiceFluent&lt;T extends UiServiceFluent&lt;?&gt;&gt; {

   private final T uiServiceFluent;
   private final SmartWebDriver driver;

   /**
    * Constructs a new {@code NavigationServiceFluent} instance.
    *
    * @param uiServiceFluent The parent fluent UI service instance.
    * @param webDriver       The smart web driver used for navigation actions.
    */
<span class="fc" id="L33">   public NavigationServiceFluent(T uiServiceFluent, SmartWebDriver webDriver) {</span>
<span class="fc" id="L34">      this.uiServiceFluent = uiServiceFluent;</span>
<span class="fc" id="L35">      this.driver = webDriver;</span>
<span class="fc" id="L36">   }</span>

   /**
    * Navigates to the specified URL and maximizes the browser window.
    *
    * @param url The URL to navigate to.
    * @return The fluent UI service instance.
    */
   public T navigate(String url) {
<span class="fc" id="L45">      Allure.step(&quot;[UI - Navigation] Navigate to the URL and maximize the browser window&quot;);</span>

<span class="fc" id="L47">      driver.manage().window().maximize();</span>
<span class="fc" id="L48">      driver.get(url);</span>
<span class="fc" id="L49">      return uiServiceFluent;</span>
   }

   /**
    * Navigates back in the browser history.
    *
    * @return The fluent UI service instance.
    */
   public T back() {
<span class="fc" id="L58">      Allure.step(&quot;[UI - Navigation] Navigate back in the browser history&quot;);</span>

<span class="fc" id="L60">      driver.navigate().back();</span>
<span class="fc" id="L61">      return uiServiceFluent;</span>
   }

   /**
    * Navigates forward in the browser history.
    *
    * @return The fluent UI service instance.
    */
   public T forward() {
<span class="fc" id="L70">      Allure.step(&quot;[UI - Navigation] Navigate forward in the browser history&quot;);</span>

<span class="fc" id="L72">      driver.navigate().forward();</span>
<span class="fc" id="L73">      return uiServiceFluent;</span>
   }

   /**
    * Refreshes the current page.
    *
    * @return The fluent UI service instance.
    */
   public T refresh() {
<span class="fc" id="L82">      Allure.step(&quot;[UI - Navigation] Refresh the current page&quot;);</span>

<span class="fc" id="L84">      driver.navigate().refresh();</span>
<span class="fc" id="L85">      return uiServiceFluent;</span>
   }

   /**
    * Switches to a newly opened browser tab.
    *
    * @return The fluent UI service instance.
    */
   public T switchToNewTab() {
<span class="fc" id="L94">      Allure.step(&quot;[UI - Navigation] Switch to a newly opened browser tab&quot;);</span>

<span class="fc" id="L96">      String currentHandle = driver.getWindowHandle();</span>
<span class="fc bfc" id="L97" title="All 2 branches covered.">      for (String handle : driver.getWindowHandles()) {</span>
<span class="fc bfc" id="L98" title="All 2 branches covered.">         if (!handle.equals(currentHandle)) {</span>
<span class="fc" id="L99">            driver.switchTo().window(handle);</span>
<span class="fc" id="L100">            break;</span>
         }
<span class="fc" id="L102">      }</span>
<span class="fc" id="L103">      return uiServiceFluent;</span>
   }

   /**
    * Switches to a browser window with the specified title.
    *
    * @param windowTitle The title of the target window.
    * @return The fluent UI service instance.
    * @throws NoSuchWindowException if no window with the given title is found.
    */
   public T switchToWindow(String windowTitle) {
<span class="fc" id="L114">      Allure.step(&quot;[UI - Navigation] Switch to the browser window with the title: &quot; + windowTitle);</span>

<span class="fc bfc" id="L116" title="All 2 branches covered.">      for (String handle : driver.getWindowHandles()) {</span>
<span class="fc" id="L117">         driver.switchTo().window(handle);</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">         if (Objects.equals(driver.getTitle(), windowTitle)) {</span>
<span class="fc" id="L119">            return uiServiceFluent;</span>
         }
<span class="fc" id="L121">      }</span>
<span class="fc" id="L122">      throw new NoSuchWindowException(&quot;No window found with title: &quot; + windowTitle);</span>
   }

   /**
    * Closes the current browser tab and switches to another available tab if present.
    *
    * @return The fluent UI service instance.
    */
   public T closeCurrentTab() {
<span class="fc" id="L131">      Allure.step(&quot;[UI - Navigation] Close the current browser tab&quot;);</span>

<span class="fc" id="L133">      driver.close();</span>
<span class="fc bfc" id="L134" title="All 2 branches covered.">      if (!driver.getWindowHandles().isEmpty()) {</span>
<span class="fc" id="L135">         driver.switchTo().window(driver.getWindowHandles().iterator().next());</span>
      }
<span class="fc" id="L137">      return uiServiceFluent;</span>
   }

   /**
    * Switches to an iframe using its index.
    *
    * @param index The index of the iframe.
    * @return The fluent UI service instance.
    */
   public T switchToFrameByIndex(int index) {
<span class="fc" id="L147">      Allure.step(&quot;[UI - Navigation] Switch to the iframe using index: &quot; + index);</span>

<span class="fc" id="L149">      driver.switchTo().frame(index);</span>
<span class="fc" id="L150">      return uiServiceFluent;</span>
   }

   /**
    * Switches to an iframe using its name or ID.
    *
    * @param nameOrId The name or ID of the iframe.
    * @return The fluent UI service instance.
    */
   public T switchToFrameByNameOrId(String nameOrId) {
<span class="fc" id="L160">      Allure.step(&quot;[UI - Navigation] Switch to the iframe using name or ID: &quot; + nameOrId);</span>

<span class="fc" id="L162">      driver.switchTo().frame(nameOrId);</span>
<span class="fc" id="L163">      return uiServiceFluent;</span>
   }

   /**
    * Switches to the parent frame of the current iframe.
    *
    * @return The fluent UI service instance.
    */
   public T switchToParentFrame() {
<span class="fc" id="L172">      Allure.step(&quot;[UI - Navigation] Switch to the parent frame&quot;);</span>

<span class="fc" id="L174">      driver.switchTo().parentFrame();</span>
<span class="fc" id="L175">      return uiServiceFluent;</span>
   }

   /**
    * Switches back to the default content from an iframe.
    *
    * @return The fluent UI service instance.
    */
   public T switchToDefaultContent() {
<span class="fc" id="L184">      Allure.step(&quot;[UI - Navigation] Switch back to the default content from the iframe&quot;);</span>

<span class="fc" id="L186">      driver.switchTo().defaultContent();</span>
<span class="fc" id="L187">      return uiServiceFluent;</span>
   }

   /**
    * Accepts an alert pop-up.
    *
    * @return The fluent UI service instance.
    */
   public T acceptAlert() {
<span class="fc" id="L196">      Allure.step(&quot;[UI - Navigation] Accept the alert pop-up&quot;);</span>

<span class="fc" id="L198">      driver.switchTo().alert().accept();</span>
<span class="fc" id="L199">      return uiServiceFluent;</span>
   }

   /**
    * Dismisses an alert pop-up.
    *
    * @return The fluent UI service instance.
    */
   public T dismissAlert() {
<span class="fc" id="L208">      Allure.step(&quot;[UI - Navigation] Dismiss the alert pop-up&quot;);</span>

<span class="fc" id="L210">      driver.switchTo().alert().dismiss();</span>
<span class="fc" id="L211">      return uiServiceFluent;</span>
   }

   /**
    * Retrieves the text of an alert pop-up.
    *
    * @return The text of the alert.
    */
   private String getAlertText() {
<span class="fc" id="L220">      return driver.switchTo().alert().getText();</span>
   }

   /**
    * Validates that the alert text matches the expected value.
    *
    * @param expected The expected alert text.
    * @return The fluent UI service instance.
    */
   public T validateAlertText(String expected) {
<span class="fc" id="L230">      Allure.step(&quot;[UI - Navigation] Validate that the alert text matches the expected value&quot;);</span>

<span class="fc" id="L232">      return validateAlertText(expected, false);</span>
   }

   /**
    * Validates that the alert text matches the expected value, with an optional soft assertion.
    *
    * @param expected The expected alert text.
    * @param soft     If {@code true}, the validation will be performed softly.
    * @return The fluent UI service instance.
    */
   public T validateAlertText(String expected, boolean soft) {
<span class="fc" id="L243">      Allure.step(&quot;[UI - Navigation] Validate alert text with expected value: &quot; + expected);</span>

<span class="fc" id="L245">      String alertText = getAlertText();</span>
<span class="fc bfc" id="L246" title="All 2 branches covered.">      if (soft) {</span>
<span class="fc" id="L247">         return (T) uiServiceFluent.validate(</span>
<span class="fc" id="L248">               softAssertions -&gt; softAssertions.assertThat(alertText).as(&quot;Validating Alert text&quot;)</span>
<span class="fc" id="L249">                     .isEqualTo(expected));</span>
      } else {
<span class="fc" id="L251">         return (T) uiServiceFluent.validate(</span>
<span class="fc" id="L252">               () -&gt; Assertions.assertThat(alertText).as(&quot;Validating Alert text&quot;)</span>
<span class="fc" id="L253">                     .isEqualTo(expected));</span>
      }
   }

   /**
    * Opens a new browser tab using JavaScript and switches to it.
    *
    * @return The fluent UI service instance.
    */
   @SuppressFBWarnings(value = &quot;BC_UNCONFIRMED_CAST&quot;)
   public T openNewTab() {
<span class="fc" id="L264">      Allure.step(&quot;[UI - Navigation] Open a new browser tab using JavaScript and switch to it&quot;);</span>

<span class="fc" id="L266">      ((JavascriptExecutor) driver).executeScript(&quot;window.open();&quot;);</span>
<span class="fc" id="L267">      return switchToNewTab();</span>
   }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>