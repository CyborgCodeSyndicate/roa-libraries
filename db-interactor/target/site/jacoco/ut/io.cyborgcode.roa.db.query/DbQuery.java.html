<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DbQuery.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Ring of Automation Database Library</a> &gt; <a href="index.source.html" class="el_package">io.cyborgcode.roa.db.query</a> &gt; <span class="el_source">DbQuery.java</span></div><h1>DbQuery.java</h1><pre class="source lang-java linenums">package io.cyborgcode.roa.db.query;

import io.cyborgcode.roa.db.config.DatabaseConfiguration;
import io.cyborgcode.roa.db.config.DbConfig;
import io.cyborgcode.roa.db.config.DbConfigHolder;

import static io.cyborgcode.roa.db.config.DbConfigHolder.getDbConfig;

/**
 * Represents a database query and provides configuration details.
 *
 * &lt;p&gt;This interface defines a structured way to execute database queries,
 * retrieve their configurations, and apply parameterized values dynamically.
 *
 * @author Cyborg Code Syndicate üíçüë®üíª
 */
public interface DbQuery&lt;T extends Enum&lt;T&gt;&gt; {

   /**
    * Retrieves the raw query string.
    *
    * @return The SQL query as a {@code String}.
    */
   String query();

   /**
    * Provides the database configuration associated with this query.
    *
    * &lt;p&gt;The configuration is fetched from {@link DbConfigHolder}, ensuring
    * consistency across database queries.
    *
    * @return The {@link DatabaseConfiguration} for the query.
    */
   default DatabaseConfiguration config() {
<span class="fc" id="L35">      DbConfig dbConfig = getDbConfig();</span>
<span class="fc" id="L36">      return DatabaseConfiguration.builder()</span>
<span class="fc" id="L37">            .dbType(dbConfig.type())</span>
<span class="fc" id="L38">            .host(dbConfig.host())</span>
<span class="fc" id="L39">            .port(dbConfig.port())</span>
<span class="fc" id="L40">            .database(dbConfig.name())</span>
<span class="fc" id="L41">            .dbUser(dbConfig.username())</span>
<span class="fc" id="L42">            .dbPassword(dbConfig.password())</span>
<span class="fc" id="L43">            .fullConnectionString(dbConfig.fullConnectionString())</span>
<span class="fc" id="L44">            .build();</span>
   }

   /**
    * Retrieves the enum representation of the query implementation.
    *
    * @return The query's enum representation.
    */
   T enumImpl();

   /**
    * Applies a parameter to the query dynamically.
    *
    * &lt;p&gt;This method replaces placeholders within the query with actual values,
    * allowing parameterized SQL execution.
    *
    * @param name  The name of the parameter to replace.
    * @param value The value to assign to the parameter.
    * @return A new {@code DbQuery} instance with the applied parameter.
    */
   default DbQuery&lt;T&gt; withParam(String name, Object value) {
<span class="fc" id="L65">      return new ParametrizedQuery&lt;&gt;(this).withParam(name, value);</span>
   }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>